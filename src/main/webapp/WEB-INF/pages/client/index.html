<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/static/css/reset.css}">
    <link rel="stylesheet" th:href="@{/static/css/style.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
    <script type="text/javascript" th:src="@{/static/script/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/static/script/jquery-3.2.1.js}"></script>
    <title>书城首页</title>
            <script type="text/javascript">
                $(function () {
                   $(".addItemToCart").click(function () {
                        var bookId=$(this).attr("bookId");
                        location.href="http://localhost:8080/bookstore/addItem/"+bookId;
                    })
                });
            </script>
</head>

<body>

    <div id="header">
        <img class="logo_img" alt="" th:src="@{/static/img/logo2.jpg}">
        <span class="wel_word">兴欣书城</span>
        <div>

                <a class="denglu" th:href="@{/user/loginbtn}" th:if="${session.login==null}">登录</a>
                <a class="zhuce" th:href="@{/user/registbtn}" th:if="${session.login==null}">注册</a> &nbsp;&nbsp;

                <span>欢迎<span class="um_span" th:text="${session.login.username}" th:if="${session.login !=null}"></span>光临兴欣书城</span>
            <a th:href="@{/toCartPage}">购物车</a>

            <a th:href="@{/user/loginout}" th:if="${session.login!=null}">注销</a>
        </div>
    </div>
        <div id="main">
        <div id="book">
            <div class="book_cond">
                <form th:action="@{/queryPrice}" method="post">
                    <input type="hidden" name="pageNum" value="">
                    价格：<input id="min" type="text" name="min" value=""> 元
                    <input id="max" type="text" name="max" value=""> 元
                    <input type="submit" value="查询" />
                </form>
            </div>
            <div style="text-align: center">
                        <!--购物车不为空时-->
                        <span th:if="${session.cart!=null}">你的购物车中有[[${session.cart.totalCount}]]件商品</span><br>
                        <div th:if="${session.cart!=null}">
                            您刚刚将 <span style="color: red" >[[${session.lastName}]]</span>加入到了购物车中
                        </div>
                        <!--购物车为空时-->
                            <span id="cartTotalCount"> </span>
                            <span style="color: red" id="cartLastName" th:if="${session.cart==null}">当前购物车为空</span>

            </div>
                <div class="b_list" th:each="book:${bookByPage}">
                    <div class="img_div">
                        <img class="book_img" alt="" th:src="${book.imgPath}" />
                    </div>
                    <div class="book_info">
                        <div class="book_name">
                            <span class="sp1">书名:</span>
                            <span class="sp2">[[${book.name}]]</span>
                        </div>
                        <div class="book_author">
                            <span class="sp1">作者:</span>
                            <span class="sp2">[[${book.author}]]</span>
                        </div>
                        <div class="book_price">
                            <span class="sp1">价格:</span>
                            <span class="sp2">[[${book.price}]]</span>
                        </div>
                        <div class="book_sales">
                            <span class="sp1">销量:</span>
                            <span class="sp2">[[${book.sales}]]</span>
                        </div>
                        <div class="book_amount">
                            <span class="sp1">库存:</span>
                            <span class="sp2">[[${book.stock}]]</span>
                        </div>
                        <div class="book_add">
                            <button th:attr="bookId=${book.id}" class="addItemToCart" style="background-color: red">加入购物车</button>
                        </div>
                    </div>
                </div>
        </div>
        </div>
        <div class="modal-footer no-margin-top" id="">
            <div class="col-md-6">
                当前第 [[${pageInfo.pageNum}]]页,共 [[${pageInfo.pages}]] 页.一共 [[${pageInfo.total}]] 条记录
            </div>
            <ul class="pagination pull-right no-margin">
                <li th:if="${pageInfo.hasPreviousPage}">
                    <a th:href="@{/1}">首页</a>
                </li>
                <li class="prev" th:if="${pageInfo.hasPreviousPage}">
                    <a th:href="@{/}+${pageInfo.prePage}">
                        <i class="glyphicon glyphicon-menu-left"></i>
                    </a>
                </li>
                <!--遍历条数-->
                <li th:each="nav:${pageInfo.navigatepageNums}">
                    <a th:href="@{/}+${nav}" th:text="${nav}" th:if="${nav != pageInfo.pageNum}"></a>
                    <span style="font-weight: bold;background: #6faed9;" th:if="${nav == pageInfo.pageNum}" th:text="${nav}" ></span>
                </li>

                <li class="next" th:if="${pageInfo.hasNextPage}">
                    <a th:href="@{/}+${pageInfo.nextPage}">
                        <i class="glyphicon glyphicon-menu-right"></i>
                    </a>
                </li>

                <li>
                    <a th:href="@{/}+${pageInfo.pages}">尾页</a>
                </li>
            </ul>
            </div>
        </div>
    <!--引入footer.html-->
    <div th:replace="commons/footer::#bottom"></div>

</body>

</html>